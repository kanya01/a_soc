<div class="bg-white rounded-lg shadow-md overflow-hidden" data-controller="audio-post">
  <div class="p-4">
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center space-x-3">
        <% if post.user.avatar.attached? %>
          <%= image_tag post.user.avatar_url, class: "h-10 w-10 rounded-full object-cover" %>
        <% else %>
          <div class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
            <span class="text-gray-500 font-medium">
              <%= post.user.username.first.upcase %>
            </span>
          </div>
        <% end %>
        <div>
          <h3 class="font-medium"><%= post.user.username %></h3>
          <p class="text-sm text-gray-500">
            <%= post.location %>
            <span class="mx-1">â€¢</span>
            <%= time_ago_in_words(post.created_at) %> ago
          </p>
        </div>
      </div>
      <button class="text-gray-400 hover:text-gray-600">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
        </svg>
      </button>
    </div>

    <div class="relative aspect-w-16 aspect-h-9 bg-gray-100 rounded-lg mb-4">
      <% if post.image.present? %>
        <%= image_tag post.image_url, class: "object-cover w-full h-full rounded-lg" %>
      <% end %>

      <div class="absolute inset-0 flex items-center justify-center">
        <div class="bg-white/90 backdrop-blur-sm rounded-full p-3 shadow-lg">
          <button data-action="click->audio-post#togglePlay" class="focus:outline-none">
            <svg data-audio-post-target="playIcon" class="h-8 w-8 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <div class="flex items-center justify-between">
      <div class="flex space-x-4">
        <button class="flex items-center space-x-1 text-gray-500 hover:text-gray-700">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
          </svg>
          <span class="text-sm"><%= post.likes_count %></span>
        </button>

        <button class="flex items-center space-x-1 text-gray-500 hover:text-gray-700">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
          </svg>
          <span class="text-sm"><%= post.comments_count %></span>
        </button>
      </div>

      <audio data-audio-post-target="audio" src="<%= post.audio_url %>" preload="none"></audio>
    </div>
  </div>
</div>